# Research Projects

## Task definition

Binnen de havens van de klanten van Cofano worden momenteel de containers op de kade ingedeeld op basis van de ervaring van medewerkers en simpele beslisregels. Cofano zou hier graag wat in willen veranderen. Zij willen namelijk de markt instappen met een oplossing hiervoor. Vanwege deze reden is Cofano benieuwd welke mogelijkheden er zijn om de methode van containerindeling naar het volgende niveau te brengen doormiddel van AI. Vanuit Cofano was er een interresse in het gebruik van Reinforcement learning. Aan de hand van de hierboven beschreven tekst is er de mogelijkheid om de volgende probleemstelling op te stellen: De methode van containers indelen in de haven van de klanten van Cofano is geheel afhankelijk van de denkkracht van mensen. Op basis van de probleemstelling kan er ook een doelstelling opgesteld worden. De doelstelling luidt als volgd: Welke data science mogelijkheden zijn er voor het indelen van containers in de haven bij de klanten van Cofano. Voor simplificatie is er tijdens deze opdracht maar één type machine die containers verplaatst. Deze machine heet de reachstacker. De reachstacker kan machinaal vier containers op elkaar zetten.

### Onderzoeksvraag 1
Op basis van de opdrachtomschrijving was er de volgende onderzoeksvraag opgesteld: Hoe kunnen de containers optimaal ingedeeld worden, zodat de containers die bestemd zijn voor hetzelfde zeeschip bij elkaar blijven? Het doel achter de onderzoeksvraag was dat wij wilde achterhalen hoe containers zo veel mogelijk in groepen ingedeeld kunnen worden, want als containers die voor hetzelfde schip bestemd zijn in dezelfde rij staan dan staan er geen andere containers in de weg. Daarnaast wilde wij ook methodes selecteren naar welke wij meer onderzoek wilde doen om te achterhalen hoe geschikt zijn voor het oplossen van de probleemstelling.

### Onderzoeksvraag 2
Om te achterhalen welke mogelijkheden er zijn om dit probleem op te lossen doormiddel van data science moet hier onderzoek naar gedaan worden. Op basis hiervan is er de volgende onderzoeksvraag opgesteld: Welke data science mogelijkheden zijn er om de indeling van containers op de kade te bepalen? Om deze onderzoeksvraag te beantwoorden is er deskresearch uitgevoerd door verschillende papers, blogs en video's bestudeerd om verschillende methodes van AI te bestuderen.

## Evaluation

Het indelen van de containers is momenteel nog niet gelukt voor de gehele kade van de klant van Cofano. Momenteel is er maar een klein gedeelte hiervan gebruikt voor het berekenen van de ideale indeling van de containers. Voor verder onderzoek kan de environment van het reinforcement model uitgebreid worden om de gehele kade te berekenen.

Door gebrek aan tijd is het ons niet gelukt om het reinforcement model te trainen op een kade die gedeeltelijk gevuld is. Als we meer tijd hadden gehad, dan zouden wij dit proberen en de resultaten ervan analyseren. 

Tijdens ons onderzoek hebben wij ons gefocused op het optimaliseren van het uitlaad proces om het inlaadproces te kunnen versnellen door containers die naar hetzelfde schip gaan bij elkaar te zetten. Helaas zijn we er niet aan toe gekomen om het inlaadproces zelf te simuleren. In deze simulatie zou een echte situatie nagebootst kunnen worden, maar met de containers ingedeeld op basis van het Reinforcement model. Hiermee zou het model gecontroleerd kunnen worden om te bepalen of de containers in de gesimuleerde omgeving sneller ingeladen zijn.

In de gesimuleerde situatie wordt er momenteel maar gebruik gemaakt van één machine om de containers te verplaatsen. Dit zou uitgebreidt kunnen worden door meerdere type machines en/of meerdere machines van dezelfde soort. Nu wordt er maar één reachstacker gebruikt, maar er zijn op de haven ook kranen en andere machines voor transport van containers.

Voor het trainen wordt momenteel zelf gegenereerde data gebruikt voor het bepalen van de hoeveelheid containers die aankomen en naar hoeveel schepen deze toe moeten. Hiervoor is er niet gebruik gemaakt van de schema's of planning in echte situatie. Als er meer tijd zou zijn, dan was dit een onderdeel waar wij onderzoek naar zouden doen om deze data te gebruiken voor het simuleren van de omgeving.

## Conclusions
Tijdens het onderzoek zijn er twee methodes onderzocht welke mogelijk het proces van containers indelen op de kade kunnen verbeteren. Bij Reinforcement Learning is er de mogelijkheid op basis van input data de containers in te delen op de kade. Momenteel geef je aan het model mee hoeveel containers je wilt plaatsen op de kade en over hoeveel schepen deze verdeeld zijn. het model gaat dan trainen op de verschillende mogelijkheden die er zijn van de input die je hebt gegeven. Na het trainen van het model kan deze binnen een seconden in goede oplossing geven voor het invullen van de containers op de kade. Zodra het model getraind is geeft hij oplossing zoals degene die op de foto hieronder te zien is. De code voor dit model is geschreven door Milan van Oeveren. Het model wat u op de foto ziet heeft zichzelf getraind na ongeveer 2 minuten. nadat een model getraind is kan het binnen een seconde.  

<img src="https://user-images.githubusercontent.com/121485743/212911224-3d1f08e0-7f28-4554-9256-15e312446b02.png" width="300" height="300" />

De tweede methode is Lineair programmeren. Deze methode gaat een hele andere richting in als Reinforcement Learning. Bij deze methode stel je namelijk restricties waarop een bepaald model moet voldoen en op basis van die restricties gaat het model de containers indelen. Het model hoeft dus niks te leren of trainen voordat het de acties kan uitvoeren. Op de foto hieronder ziet u een indeling die het lineair programmeermodel heeft gemaakt op basis van de restricties. Het model deed hier ongeveer vier seconden over, maar door problemen met het model binnen de gebruikte library maakt deze bijna 50 procent van de tijd een indeling welke niet zou mogen volgens de restricties.

<img src="https://user-images.githubusercontent.com/121485743/212912743-3c333fd2-4fb5-4494-ae0e-056d6e45847f.png" width="500" height="300" />

Elk van deze methodes zet de containers die voor hetzelfde schip op zijn eigen manier bij elkaar. Binnen het Reinforced Learning model krijgt het model een extra reward als deze meerdere containers voor hetzelfde schip tegen elkaar zet en binnen het Lineair Programmeer model is er een restrictie dat containers alleen op of voor andere containers gezet mogen worden die later weg gaan dan de container zelf. binnen dit model vertrekt namelijk eerst schip 1 dan 2 en als laatste 3. Op deze manier ontstaan er groepen containers voor hetzelfde schip. De code voor het lineair programmeer model is geschreven door Bram ten Cate.

Vanwege het probleem met de inconsistentie bij het LP model die zich momenteel bevinden is de beste methode Reinforced Learning. Allebei de methoden kunnen snel containers indelen op de aangegeven kade, al moet het RL model eerst getraind zijn. Het RL model heeft minder problemen in de huidige status en is daarom beter geschikt.

## Planning
Voor het plannen van de verschillende sprints en onderzoeken is er gebruik gemaakt van een scrumboard. Dit Scrumboard is gemaakt op de website Trello. Hieronder ziet u een foto van het scrumboard zoals deze er momenteel uit ziet.
![image](https://user-images.githubusercontent.com/121485743/212014720-201f27d9-c6a4-49cb-bfe5-3f1d323ba3be.png)
Op de foto zijn vijf verschillende blokken te zien. allereerst is er de backlog. In de backlog staan onderdelen welke in een latere sprint uitgevoerd gaan worden. Deze onderdelen staan nog in de backlog ondanks dat het onderzoek klaar is, want als er meer tijd was dan hadden wij deze taken nog willen uitvoeren. In het onderdeel To Do staan onderdelen die deze sprint nog uitgevoerd moeten worden. Het volgende blok heet Doing. In dit blok staan de onderdelen waar momenteel aan gewerkt wordt. Het vierde blok genaamd Checking gaat over onderdelen welke momenteel gecontroleerd moeten worden. Dit kan intern door een ander teamgenoot zijn of door één van de begeleiders van het onderzoek. In dit geval staan er drie onderdelen van de paper. Deze onderdelen zijn opgestuurd naar Tony ter controle. Als laatste blok is er het onderdeel Done. In de blok staan alle activiteiten die afgerond zijn. Hierin zijn ook de activiteiten van de vorige sprints te vinden. Aan elke activiteit wordt een persoon of meerdere personen aan gekoppeld. Zo is er overzichtelijk wie waaraan werkt en ontstaat er een verantwoordelijkheid voor de verschillende activiteiten. Op deze manier kon er gecontroleerd of iedereen met zijn werk bezig en voldoende tijd besteede aan het onderzoek.

